sudo: required
services:
  - docker

before_install:
  - cd ./app
  - export DEV=true
  - docker compose build

script:
  - docker-compose run --rm app sh -c "pylint ."
  - docker-compose run --rm app sh -c "./wait_for_db.sh && pytest"

after_script:
  - export DEV=false